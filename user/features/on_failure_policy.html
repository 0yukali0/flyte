

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>On Failure Policy &mdash; Flyte 0.8.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Interruptible" href="interruptible.html" />
    <link rel="prev" title="Single Task Excution" href="single_task_execution.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/flyte_lockup_on_dark.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Flyte Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/index.html">Flyte Concepts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Flyte Features</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="flytecli.html">Flyte CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="observability.html">Metrics for your executions</a></li>
<li class="toctree-l3"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="labels_annotations.html">Labels and Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="task_cache.html">Task Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="roles.html">Why roles?</a></li>
<li class="toctree-l3"><a class="reference internal" href="single_task_execution.html">Single Task Excution</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">On Failure Policy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-it">What is it</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use-it">How to use it</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interruptible.html">Interruptible</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tasktypes/index.html">Flyte Task Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../administrator/index.html">Administrator Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributor/index.html">Contributor Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">Flyte User cookbook and examples (Github)</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lyft/flytesnacks/blob/master/README.md">FlyteSnacks - Examples &amp; Cookbook</a></li>
</ul>
<p class="caption"><span class="caption-text">Generated Documentation from Source</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../flyteidl/index.html">Flyte Language and API specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flytekit/index.html">Flytekit</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flytepropeller">FlytePropeller</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flyteadmin">FlyteAdmin</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flyteplugins">FlytePlugins</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/datacatalog">DataCatalog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Flyte</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User docs</a> &raquo;</li>
        
          <li><a href="index.html">Flyte Features</a> &raquo;</li>
        
      <li>On Failure Policy</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user/features/on_failure_policy.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="on-failure-policy">
<span id="id1"></span><h1>On Failure Policy<a class="headerlink" href="#on-failure-policy" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-it">
<h2>What is it<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h2>
<p>The default behavior for when a node fails in a workflow is to immediately abort the entire workflow. The reasoning behind this thinking
is to avoid wasting resources since the workflow will end up failing anyway. There are certain cases however, when it’s desired for the
workflow to carry on executing the branches it can execute.</p>
<p>For example when the remaining tasks are marked as <a class="reference internal" href="task_cache.html#features-task-cache"><span class="std std-ref">cacheable</span></a>.
Once the failure has been fixed and the workflow is relaunched, cached tasks will be bypassed quickly.</p>
</div>
<div class="section" id="how-to-use-it">
<h2>How to use it<a class="headerlink" href="#how-to-use-it" title="Permalink to this headline">¶</a></h2>
<p>Use on_failure attribute on workflow_class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flytekit.models.core.workflow</span> <span class="kn">import</span> <span class="n">WorkflowMetadata</span>

<span class="nd">@workflow_class</span><span class="p">(</span><span class="n">on_failure</span><span class="o">=</span><span class="n">WorkflowMetadata</span><span class="o">.</span><span class="n">OnFailurePolicy</span><span class="o">.</span><span class="n">FAIL_AFTER_EXECUTABLE_NODES_COMPLETE</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">RunToCompletionWF</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">pass</span>
</pre></div>
</div>
<p>Available values in the policy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">OnFailurePolicy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines the execution behavior of the workflow when a failure is detected.</span>
<span class="sd">    Attributes:</span>
<span class="sd">        FAIL_IMMEDIATELY                        Instructs the system to fail as soon as a node fails in the</span>
<span class="sd">                                                workflow. It&#39;ll automatically abort all currently running nodes and</span>
<span class="sd">                                                clean up resources before finally marking the workflow executions as failed.</span>
<span class="sd">        FAIL_AFTER_EXECUTABLE_NODES_COMPLETE    Instructs the system to make as much progress as it can. The system</span>
<span class="sd">                                                will not alter the dependencies of the execution graph so any node</span>
<span class="sd">                                                that depend on the failed node will not be run. Other nodes that will</span>
<span class="sd">                                                be executed to completion before cleaning up resources and marking</span>
<span class="sd">                                                the workflow execution as failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">FAIL_IMMEDIATELY</span> <span class="o">=</span> <span class="n">_core_workflow</span><span class="o">.</span><span class="n">WorkflowMetadata</span><span class="o">.</span><span class="n">FAIL_IMMEDIATELY</span>
    <span class="n">FAIL_AFTER_EXECUTABLE_NODES_COMPLETE</span> <span class="o">=</span> <span class="n">_core_workflow</span><span class="o">.</span><span class="n">WorkflowMetadata</span><span class="o">.</span><span class="n">FAIL_AFTER_EXECUTABLE_NODES_COMPLETE</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="interruptible.html" class="btn btn-neutral float-right" title="Interruptible" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="single_task_execution.html" class="btn btn-neutral float-left" title="Single Task Excution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Flyte Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>