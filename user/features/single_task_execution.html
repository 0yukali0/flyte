

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Single Task Excution &mdash; Flyte 0.5.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="On Failure Policy" href="on_failure_policy.html" />
    <link rel="prev" title="Why roles?" href="roles.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Flyte
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Flyte Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/index.html">Flyte Concepts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Flyte Features</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="flytecli.html">Flyte CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="observability.html">Metrics for your executions</a></li>
<li class="toctree-l3"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="labels_annotations.html">Labels and Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="task_cache.html">Task Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="roles.html">Why roles?</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Single Task Excution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-are-single-task-executions">What are single task executions?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launch-a-single-task">Launch a single task</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fetch-and-launch-a-single-task">Fetch and launch a single task</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launch-a-single-task-from-the-commandline">Launch a single task from the commandline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#monitoring-single-task-executions-in-the-flyte-console">Monitoring single task executions in the Flyte console</a></li>
<li class="toctree-l4"><a class="reference internal" href="#registering-and-launching-a-single-task">Registering and launching a single task</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="on_failure_policy.html">On Failure Policy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tasktypes/index.html">Flyte Task Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../administrator/index.html">Administrator Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributor/index.html">Contributor Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">Generated Documentation from Source</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../flyteidl/index.html">Flyte Language and API specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flytekit/index.html">Flytekit</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flytepropeller">FlytePropeller</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flyteadmin">FlyteAdmin</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flyteplugins">FlytePlugins</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/datacatalog">DataCatalog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Flyte</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User docs</a> &raquo;</li>
        
          <li><a href="index.html">Flyte Features</a> &raquo;</li>
        
      <li>Single Task Excution</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user/features/single_task_execution.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="single-task-excution">
<span id="features-singletaskexec"></span><h1>Single Task Excution<a class="headerlink" href="#single-task-excution" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-are-single-task-executions">
<h2>What are single task executions?<a class="headerlink" href="#what-are-single-task-executions" title="Permalink to this headline">¶</a></h2>
<p>Tasks are the most atomic unit of execution in Flyte.  Although workflows are traditionally composed of multiple tasks with dependencies
defined by shared inputs and outputs it can be helpful to execute a single task during the process of iterating on its definition.
It can be tedious to write a new workflow definition every time you want to excecute a single task under development but single task
executions can be used to easily iterate on task logic.</p>
</div>
<div class="section" id="launch-a-single-task">
<h2>Launch a single task<a class="headerlink" href="#launch-a-single-task" title="Permalink to this headline">¶</a></h2>
<p>After you’ve built an image with your updated task code, create an execution using launch:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@inputs</span><span class="p">(</span><span class="n">plant</span><span class="o">=</span><span class="n">Types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>
<span class="nd">@outputs</span><span class="p">(</span><span class="n">out</span><span class="o">=</span><span class="n">Types</span><span class="o">.</span><span class="n">String</span><span class="p">)</span>
<span class="nd">@python_task</span>
<span class="k">def</span> <span class="nf">my_task</span><span class="p">(</span><span class="n">wf_params</span><span class="p">,</span> <span class="n">plant</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
    <span class="o">...</span>


<span class="n">my_single_task_execution</span> <span class="o">=</span> <span class="n">my_task</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s2">&quot;my_flyte_projext&quot;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="s2">&quot;development&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;plant&#39;</span><span class="p">:</span> <span class="s1">&#39;ficus&#39;</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Created {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">my_single_task_execution</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
</pre></div>
</div>
<p>Just like workflow executions, you can optionally pass a user-defined name, labels, annotations, and/or notifications when launching a single task.</p>
<p>The type of <code class="docutils literal notranslate"><span class="pre">my_single_task_execution</span></code> is <a class="reference external" href="https://github.com/lyft/flytekit/blob/1926b1285591ae941d7fc9bd4c2e4391c5c1b21b/flytekit/common/workflow_execution.py#L14">SdkWorkflowExecution</a>
and has the full set of methods and functionality available for conventional WorkflowExecutions.</p>
</div>
<div class="section" id="fetch-and-launch-a-single-task">
<h2>Fetch and launch a single task<a class="headerlink" href="#fetch-and-launch-a-single-task" title="Permalink to this headline">¶</a></h2>
<p>Single task executions aren’t limited to just tasks you’ve defined in your code. You can reference previously registered tasks and launch a single task execution like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flytekit.common.tasks</span> <span class="kn">import</span> <span class="n">task</span> <span class="k">as</span> <span class="n">_task</span>

<span class="n">my_task</span> <span class="o">=</span> <span class="n">_task</span><span class="o">.</span><span class="n">SdkTask</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;my_flyte_project&quot;</span><span class="p">,</span> <span class="s2">&quot;production&quot;</span><span class="p">,</span> <span class="s2">&quot;workflows.my_task&quot;</span><span class="p">,</span> <span class="s2">&quot;abc123&quot;</span><span class="p">)</span>  <span class="c1"># project, domain, name, version</span>

<span class="n">my_task_exec</span> <span class="o">=</span> <span class="n">my_task</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s2">&quot;my_other_project&quot;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="s2">&quot;development&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;plant&#39;</span><span class="p">:</span> <span class="s1">&#39;philodendron&#39;</span><span class="p">})</span>
<span class="n">my_task_exec</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="launch-a-single-task-from-the-commandline">
<h2>Launch a single task from the commandline<a class="headerlink" href="#launch-a-single-task-from-the-commandline" title="Permalink to this headline">¶</a></h2>
<p>Previously registered tasks can also be launched from the command-line using <a class="reference internal" href="flytecli.html#features-flytecli"><span class="std std-ref">flyte-cli</span></a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> flyte-cli -h example.com -p my_flyte_project -d development launch-task <span class="se">\</span>
    -u tsk:my_flyte_project:production:my_complicated_task:abc123 -- <span class="nv">an_input</span><span class="o">=</span>hi <span class="se">\</span>
    <span class="nv">other_input</span><span class="o">=</span><span class="m">123</span> <span class="nv">more_input</span><span class="o">=</span>qwerty
</pre></div>
</div>
</div>
<div class="section" id="monitoring-single-task-executions-in-the-flyte-console">
<h2>Monitoring single task executions in the Flyte console<a class="headerlink" href="#monitoring-single-task-executions-in-the-flyte-console" title="Permalink to this headline">¶</a></h2>
<p>Single task executions don’t yet have native support in the Flyte console but they’re accessible using the same URLs as ordinary workflow executions.</p>
<p>For example, for a console hosted example.com you can visit <code class="docutils literal notranslate"><span class="pre">example.com/console/projects/&lt;my_project&gt;/domains/&lt;my_domain&gt;/executions/&lt;execution_name&gt;</span></code> to track the progress of
your execution. Log links and status changes will be available as your execution progresses.</p>
</div>
<div class="section" id="registering-and-launching-a-single-task">
<h2>Registering and launching a single task<a class="headerlink" href="#registering-and-launching-a-single-task" title="Permalink to this headline">¶</a></h2>
<p>A certain category of tasks don’t rely on custom containers with registered images to run. Therefore, you may find it convenient to use
<code class="docutils literal notranslate"><span class="pre">register_and_launch</span></code> on a task definition to immediately launch a single task execution, like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">containerless_task</span> <span class="o">=</span> <span class="n">SdkPrestoTask</span><span class="p">(</span>
    <span class="n">task_inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">(</span><span class="n">ds</span><span class="o">=</span><span class="n">Types</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">Types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">rg</span><span class="o">=</span><span class="n">Types</span><span class="o">.</span><span class="n">String</span><span class="p">),</span>
    <span class="n">statement</span><span class="o">=</span><span class="s2">&quot;SELECT * FROM flyte.widgets WHERE ds = &#39;{{ .Inputs.ds}}&#39; LIMIT &#39;{{ .Inputs.count}}&#39;&quot;</span><span class="p">,</span>
    <span class="n">output_schema</span><span class="o">=</span><span class="n">Types</span><span class="o">.</span><span class="n">Schema</span><span class="p">([(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">Types</span><span class="o">.</span><span class="n">String</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">Types</span><span class="o">.</span><span class="n">Integer</span><span class="p">)]),</span>
    <span class="n">routing_group</span><span class="o">=</span><span class="s2">&quot;{{ .Inputs.rg }}&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">my_single_task_execution</span> <span class="o">=</span> <span class="n">containerless_task</span><span class="o">.</span><span class="n">register_and_launch</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s2">&quot;my_flyte_projext&quot;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="s2">&quot;development&quot;</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ds&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-02-29&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;rg&#39;</span><span class="p">:</span> <span class="s1">&#39;my_routing_group&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="on_failure_policy.html" class="btn btn-neutral float-right" title="On Failure Policy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="roles.html" class="btn btn-neutral float-left" title="Why roles?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Flyte Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>